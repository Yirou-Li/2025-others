# KEGG ID æŸ¥è¯¢è„šæœ¬

è¿™æ˜¯ä¸€ä¸ª Python è„šæœ¬ï¼Œç”¨äºä» KEGG åœ¨çº¿æ•°æ®åº“ä¸­æŸ¥è¯¢åŸºå› çš„ KEGG IDï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° TSV æ–‡ä»¶ä¸­ã€‚è„šæœ¬æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ ¹æ® COG æˆ– EC_number æŸ¥è¯¢ KEGG ID**ï¼š
   - å¦‚æœ `COG` å­˜åœ¨ï¼Œé€šè¿‡ `COG` æŸ¥è¯¢ KEGG IDã€‚
   - å¦‚æœ `EC_number` å­˜åœ¨ï¼Œé€šè¿‡ `EC_number` æŸ¥è¯¢ KEGG IDã€‚

2. **æ–­ç‚¹ç»­ä¼ **ï¼š
   - æ¯æ¬¡æŸ¥è¯¢åï¼Œå°†ç»“æœä¿å­˜åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚
   - å¦‚æœè„šæœ¬ä¸­æ–­ï¼Œä¸‹æ¬¡è¿è¡Œæ—¶å¯ä»¥ä»ä¸´æ—¶æ–‡ä»¶ä¸­è¯»å–å·²æŸ¥è¯¢çš„ç»“æœï¼Œç»§ç»­æŸ¥è¯¢æœªå¤„ç†çš„è¡Œã€‚

3. **è‡ªåŠ¨é‡è¯•æœºåˆ¶**ï¼š
   - å¦‚æœæŸ¥è¯¢å¤±è´¥ï¼ˆä¾‹å¦‚ç½‘ç»œä¸­æ–­ï¼‰ï¼Œè„šæœ¬ä¼šç­‰å¾… 1 åˆ†é’Ÿåé‡è¯•ï¼Œæœ€å¤šé‡è¯• 3 æ¬¡ã€‚

4. **å¹¶è¡Œå¤„ç†**ï¼š
   - ä½¿ç”¨ `ThreadPoolExecutor` å¹¶è¡Œå¤„ç†æŸ¥è¯¢ï¼Œæé«˜æ£€ç´¢é€Ÿåº¦ã€‚

---

## ä½¿ç”¨è¯´æ˜

### 1. å®‰è£…ä¾èµ–

ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹ Python åº“ï¼š

```bash
pip install requests pandas beautifulsoup4
```

### 2. è¿è¡Œè„šæœ¬

å°†è„šæœ¬ä¿å­˜ä¸º `add_kegg_id.py`ï¼Œç„¶ååœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
python add_kegg_id.py
```

### 3. è¾“å…¥æ–‡ä»¶æ ¼å¼

è¾“å…¥æ–‡ä»¶åº”ä¸º TSV æ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹åˆ—ï¼š

| locus_tag       | ftype | length_bp | gene   | EC_number | COG      | product                              |
|-----------------|-------|-----------|--------|-----------|----------|--------------------------------------|
| GGAONODO_00001  | CDS   | 1353      | dnaA_1 |           | COG0593  | Chromosomal replication initiator protein DnaA |
| GGAONODO_00002  | CDS   | 1137      | dnaN   |           | COG0592  | Beta sliding clamp                   |
| GGAONODO_00038  | CDS   | 750       | yfiC   | 2.1.1.223 |          | tRNA1(Val) (adenine(37)-N6)-methyltransferase |

### 4. è¾“å‡ºæ–‡ä»¶æ ¼å¼

è¾“å‡ºæ–‡ä»¶ä¸º TSV æ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹åˆ—ï¼š

| locus_tag       | ftype | length_bp | gene   | EC_number | COG      | product                              | KEGG                  |
|-----------------|-------|-----------|--------|-----------|----------|--------------------------------------|-----------------------|
| GGAONODO_00001  | CDS   | 1353      | dnaA_1 |           | COG0593  | Chromosomal replication initiator protein DnaA | K02313                |
| GGAONODO_00002  | CDS   | 1137      | dnaN   |           | COG0592  | Beta sliding clamp                   | K02311                |
| GGAONODO_00038  | CDS   | 750       | yfiC   | 2.1.1.223 |          | tRNA1(Val) (adenine(37)-N6)-methyltransferase | K02469;K02470;K02621  |

---

## è„šæœ¬å‚æ•°

è„šæœ¬ä¸­çš„ä»¥ä¸‹å‚æ•°å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ï¼š

1. **è¾“å…¥æ–‡ä»¶è·¯å¾„**ï¼š
   ```python
   input_file = "/path/to/input.tsv"
   ```

2. **è¾“å‡ºæ–‡ä»¶è·¯å¾„**ï¼š
   ```python
   output_file = "/path/to/output.tsv"
   ```

3. **ä¸´æ—¶æ–‡ä»¶è·¯å¾„**ï¼š
   ```python
   temp_file = "/path/to/temp.tsv"
   ```

4. **å¹¶è¡Œçº¿ç¨‹æ•°**ï¼š
   ```python
   max_workers = 5  # è®¾ç½®å¹¶è¡Œçº¿ç¨‹æ•°
   ```

5. **é‡è¯•æ¬¡æ•°å’Œå»¶è¿Ÿ**ï¼š
   ```python
   retries = 3  # æœ€å¤§é‡è¯•æ¬¡æ•°
   delay = 60   # é‡è¯•å»¶è¿Ÿæ—¶é—´ï¼ˆç§’ï¼‰
   ```

---

## ç¤ºä¾‹

### è¾“å…¥æ–‡ä»¶

`input.tsv`ï¼š

| locus_tag       | ftype | length_bp | gene   | EC_number | COG      | product                              |
|-----------------|-------|-----------|--------|-----------|----------|--------------------------------------|
| GGAONODO_00001  | CDS   | 1353      | dnaA_1 |           | COG0593  | Chromosomal replication initiator protein DnaA |
| GGAONODO_00002  | CDS   | 1137      | dnaN   |           | COG0592  | Beta sliding clamp                   |
| GGAONODO_00038  | CDS   | 750       | yfiC   | 2.1.1.223 |          | tRNA1(Val) (adenine(37)-N6)-methyltransferase |

### è¾“å‡ºæ–‡ä»¶

`output.tsv`ï¼š

| locus_tag       | ftype | length_bp | gene   | EC_number | COG      | product                              | KEGG                  |
|-----------------|-------|-----------|--------|-----------|----------|--------------------------------------|-----------------------|
| GGAONODO_00001  | CDS   | 1353      | dnaA_1 |           | COG0593  | Chromosomal replication initiator protein DnaA | K02313                |
| GGAONODO_00002  | CDS   | 1137      | dnaN   |           | COG0592  | Beta sliding clamp                   | K02311                |
| GGAONODO_00038  | CDS   | 750       | yfiC   | 2.1.1.223 |          | tRNA1(Val) (adenine(37)-N6)-methyltransferase | K02469;K02470;K02621  |

---

## æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œè¿æ¥**ï¼š
   - ç¡®ä¿ä½ çš„ç½‘ç»œå¯ä»¥è®¿é—® KEGG åœ¨çº¿æ•°æ®åº“ã€‚

2. **æŸ¥è¯¢é¢‘ç‡**ï¼š
   - KEGG å¯¹æŸ¥è¯¢é¢‘ç‡æœ‰é™åˆ¶ï¼Œå»ºè®®æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´å¹¶è¡Œçº¿ç¨‹æ•°å’Œå»¶è¿Ÿæ—¶é—´ã€‚

3. **ä¸´æ—¶æ–‡ä»¶**ï¼š
   - å¦‚æœè„šæœ¬ä¸­æ–­ï¼Œä¸´æ—¶æ–‡ä»¶ä¼šä¿å­˜å·²æŸ¥è¯¢çš„ç»“æœã€‚ä¸‹æ¬¡è¿è¡Œæ—¶ï¼Œè„šæœ¬ä¼šä»ä¸´æ—¶æ–‡ä»¶ä¸­è¯»å–å·²æŸ¥è¯¢çš„ç»“æœï¼Œç»§ç»­æŸ¥è¯¢æœªå¤„ç†çš„è¡Œã€‚

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)ã€‚

---

å¦‚æœä½ æœ‰å…¶ä»–éœ€æ±‚æˆ–éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ– `README.md`ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼ğŸ˜Š
